# 多态性与虚函数

## 多态性
实现方式
-   重载多态
    -   函数重载、运算符重载
-   强制多态
    -   强制转换数据类型
-   类型参数化多态
    -   类模板、函数模板
-   包含多态
    -   虚函数

## 运算符重载
```cpp
returnType operator<op>(param)  //<op>整个换成算符
```
可以重载为类的成员函数/友元函数。

注意：
-   不允许用户自定义新的算符
-   不是所有算符都能重载（’.’,’.*’,’::’,’sizeof’,’?:’)
-   算符允许的操作数个数、优先级和结合性不能变
-   算符重载不能有默认参数
-   不能对内置类型重载
-   重载以下运算符时，必须为成员函数：
    -   =,[],(),->
-   重载以下算符时，必须为友元函数：
    -   >>,<<
-   []是双目运算符！a[i]

## 虚函数
通过在基类将同名成员函数设置为虚函数，当用基类的指引、引用指向派生类时，可以调用派生类相应函数。
```cpp
class Animal
{
    public:
    virtual void yell();
}
class Dog
{
    void yell();
}
class Cat
{
    void yell();
}
//可以用一个Animal基类指针赋派生类对象的地址（比如Dog对象的地址），从而访问派生类的yell
```

注意：
-   只有类的成员函数才能被声明为虚函数
-   虚函数的声明只能在类内原型声明中，类外定义不能出现virtual
-   构造函数不可以是虚函数
-   析构函数可以且通常是虚函数

### 纯虚函数和抽象类

当一个虚函数被定义为`virtual returnType func() = 0`，则为纯虚函数。
纯虚函数所在的类为抽象类

注意：
-   抽象类只能作为基类，不能建立抽象类对象
-   可以声明一个抽象类的引用，通过虚函数访问派生类。