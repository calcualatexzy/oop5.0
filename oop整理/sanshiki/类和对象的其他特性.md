# 类和对象的其他特性

## 静态成员
类属性，存储在静态区
定义：用static关键字修饰

注意：
-   同样遵从访问权限规则
-   静态数据成员属于本类的所有对象共享
-   初始化工作只能在**类外**，且必须在对象生成之前就开始进行（即在class定义完之后赶紧补一个初始化）
-   初始化的时候，不需要带static关键字
-   可以直接通过指针访问静态成员（包括静态数据和静态函数）
```cpp
class Point
{
    static int count;
    static int GetCount() {return count;}
}
int Point::count = 0;
int main()
{
    int *pcnt = &Point::count;  //通过指针访问static
    数据
    int (*pGetCount)() = Point::GetCount;   //通过指针访问static成员函数
}
```

## 友元
C++通过友元机制实现类外数据共享（友元函数、友元类）

### 友元函数
友元不是该类的成员函数，但是可以访问该类的**私有成员**

注意：
-   友元函数一般在类内声明，类外定义。
-   友元函数不受访问权限的控制。
-   一个类的成员函数作为另一个类的友元函数：
    -   `friend returnType className::func(param)`
    -   实际调用时，要从这个友元函数所在的类进行访问。
    -   定义时，需要前向引用声明。
    ```cpp
    class A;//前向引用声明
    class B
    {
        private:
            int Bdata;
        public:
            friend void A::func(B& b);
    };
    class A
    {
        void func(B& b);
    };
    
    //调用：
    A a;
    B b;
    a.func(b)    //可以访问b的数据
    ```

### 友元类

注意：
-   友元类的声明也可以放在类中的任意位置
-   友元类的所有成员函数都变成友元函数
-   同样需要前向引用声明。
-   友元关系具有**单向性**
-   友元关系不能**传递**

## 类的作用域和对象生存期
局部对象、静态对象、全局对象、动态对象（用new创建，delete删除）

## 常量类型

### 常量语法
语法：
```cpp
className const objName;
const className objName;
```

### 常量成员

#### 常量成员函数
定义格式：
```cpp
returnType func(param) const;
```
说明：
-   const时函数类型的一部分，在定义部分也要带const
-   加const和不加const可以作为重载函数
-   const关键字=只读+权限划分。
    -   只读：常量成员函数**不能更新**任何数据成员
    -   权限划分：常量成员函数和常量对象只能调用**该类其他常量成员函数**，不能调用非常量成员函数。而非常量对象和非常量成员函数可以调用**常量成员函数**。

#### 常量数据成员
任何函数（包括构造函数内部）不能对该数据成员赋值，**只能通过初始化列表进行初始化**。

用法：
1、指向常量的指针（指针可修改，常量不可改）
2、指针常量（指针本身不可修改）